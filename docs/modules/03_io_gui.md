---
layout: default
title: "03: I/O & GUI"
parent: Modules
nav_order: 3
---

# Module 3: I/O and GUI

Reading, writing, and displaying images and videos with OpenCV's I/O and GUI facilities.

## Topics Covered

- Reading and writing images
- Video capture and writing
- Display windows and keyboard handling
- Trackbars and mouse events
- Drawing functions

---

## Algorithm Explanations

### 1. Image Reading (imread)

**What it does**: Loads an image from disk into memory as a NumPy array.

**Read Modes**:
| Flag | Value | Description |
|------|-------|-------------|
| `IMREAD_COLOR` | 1 | Load as BGR (default) |
| `IMREAD_GRAYSCALE` | 0 | Load as single channel |
| `IMREAD_UNCHANGED` | -1 | Load with alpha channel |

**Decoding Process**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Image Reading Pipeline                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  File   â”‚â”€â”€â”€â”€â–¶â”‚ Decoder  â”‚â”€â”€â”€â”€â–¶â”‚ Raw Pixels â”‚â”€â”€â”€â”€â–¶â”‚  NumPy   â”‚ â”‚
â”‚   â”‚ (disk)  â”‚     â”‚(JPEG/PNG)â”‚     â”‚  (BGR)     â”‚     â”‚  Array   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚   photo.jpg        Decompress      [B,G,R,B,G,R,    shape: (H,W,3) â”‚
â”‚   image.png        & Decode         B,G,R,B,G,R]    dtype: uint8   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Read Mode Comparison**:
```
Original Image (RGB with Alpha)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  R   G   B   A   R   G   B   A  ... â”‚  4 channels
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode     â”‚ Result       â”‚ Shape                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ COLOR    â”‚ B,G,R,B,G,R  â”‚ (H, W, 3) - No alpha â”‚
â”‚ GRAY     â”‚ L,L,L,L,L,L  â”‚ (H, W) - Luminance   â”‚
â”‚ UNCHANGEDâ”‚ B,G,R,A,...  â”‚ (H, W, 4) - All      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Important Notes**:
- Returns `None` if file cannot be read
- OpenCV supports: JPEG, PNG, BMP, TIFF, WebP, PBM/PGM/PPM

---

### 2. Image Writing (imwrite)

**What it does**: Saves an image to disk in specified format.

**Encoding Process**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Image Writing Pipeline                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  NumPy   â”‚â”€â”€â”€â”€â–¶â”‚ Encoder  â”‚â”€â”€â”€â”€â–¶â”‚ Compressed â”‚â”€â”€â”€â”€â–¶â”‚  File   â”‚ â”‚
â”‚   â”‚  Array   â”‚     â”‚          â”‚     â”‚    Data    â”‚     â”‚ (disk)  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚   (H, W, 3)         JPEG/PNG/        Binary blob     output.jpg    â”‚
â”‚   uint8 BGR         WebP codec                        image.png    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Quality vs File Size Trade-off**:
```
JPEG Quality Parameter (0-100)

    File Size                    Quality
       â–²                           â–²
       â”‚    â•±                      â”‚          â•±
       â”‚   â•±                       â”‚        â•±
       â”‚  â•±                        â”‚      â•±
       â”‚ â•±                         â”‚    â•±
       â”‚â•±                          â”‚  â•±
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
        0    50    100             0    50    100
          Quality                     Quality

    Low quality = Small file      Low quality = Artifacts
    High quality = Large file     High quality = Sharp
```

**Format-Specific Parameters**:

| Format | Parameter | Range | Description |
|--------|-----------|-------|-------------|
| JPEG | `IMWRITE_JPEG_QUALITY` | 0-100 | Quality (higher = better, larger) |
| PNG | `IMWRITE_PNG_COMPRESSION` | 0-9 | Compression level |
| WebP | `IMWRITE_WEBP_QUALITY` | 1-100 | Quality factor |

**Example**:
```python
cv2.imwrite("output.jpg", img, [cv2.IMWRITE_JPEG_QUALITY, 95])
```

---

### 3. In-Memory Encoding/Decoding

**Encoding to bytes** (for network transmission):
```python
success, buffer = cv2.imencode('.jpg', image, params)
# buffer is a NumPy array of bytes
```

**Decoding from bytes**:
```python
image = cv2.imdecode(buffer, cv2.IMREAD_COLOR)
```

---

### 4. Video Capture

**VideoCapture** handles reading from:
- Video files (MP4, AVI, etc.)
- Camera devices (webcam)
- Network streams (RTSP, HTTP)

**Video Source Types**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Video Capture Sources                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚   â”‚  Video File   â”‚â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚ "video.mp4"   â”‚      â”‚                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                          â”œâ”€â”€â”€â”€â”€â–¶â”‚  VideoCapture   â”‚â”€â”€â”€â”€â–¶ Frames    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”‚                 â”‚                 â”‚
â”‚   â”‚    Camera     â”‚â”€â”€â”€â”€â”€â”€â”¤      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚   â”‚   device: 0   â”‚      â”‚                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                                          â”‚
â”‚                          â”‚                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                                          â”‚
â”‚   â”‚ Network Streamâ”‚â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚   â”‚"rtsp://..."   â”‚                                                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Frame Reading Loop**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Video Capture Loop                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚    cap = VideoCapture(source)                                 â”‚
â”‚             â”‚                                                 â”‚
â”‚             â–¼                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚    â”‚   cap.isOpened()?  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚          â”‚
â”‚         Yes â”‚       No                            â”‚          â”‚
â”‚             â–¼        â–¼                            â”‚          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Exit                           â”‚          â”‚
â”‚    â”‚ ret, frame â”‚                                 â”‚          â”‚
â”‚    â”‚ = cap.read â”‚                                 â”‚          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                                 â”‚          â”‚
â”‚             â–¼                                     â”‚          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚          â”‚
â”‚    â”‚  ret True?  â”‚                                â”‚          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                â”‚          â”‚
â”‚       Yes â”‚    No                                 â”‚          â”‚
â”‚           â–¼     â–¼                                 â”‚          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Break                            â”‚          â”‚
â”‚    â”‚ Process  â”‚                                   â”‚          â”‚
â”‚    â”‚  Frame   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                               â”‚
â”‚    cap.release()                                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
cap = cv2.VideoCapture(source)
while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    # Process frame
cap.release()
```

**Video Properties**:
| Property | ID | Description |
|----------|-----|-------------|
| `CAP_PROP_FRAME_WIDTH` | 3 | Frame width |
| `CAP_PROP_FRAME_HEIGHT` | 4 | Frame height |
| `CAP_PROP_FPS` | 5 | Frames per second |
| `CAP_PROP_FRAME_COUNT` | 7 | Total frames |
| `CAP_PROP_POS_FRAMES` | 1 | Current frame position |

---

### 5. Video Writing

**VideoWriter** saves frames to video file.

**Video Writing Pipeline**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Video Writing Pipeline                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  Frames  â”‚â”€â”€â”€â”€â–¶â”‚  Codec   â”‚â”€â”€â”€â”€â–¶â”‚ Container  â”‚â”€â”€â”€â”€â–¶â”‚  File   â”‚ â”‚
â”‚   â”‚ (BGR)    â”‚     â”‚ (XVID)   â”‚     â”‚  (AVI)     â”‚     â”‚ (disk)  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚   NumPy arrays     FourCC code      Video format     output.avi    â”‚
â”‚   (H, W, 3)        compression      + metadata                      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**FourCC (Four Character Code)**:
```
FourCC = 4 ASCII characters identifying the codec

  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
  â”‚ X â”‚ V â”‚ I â”‚ D â”‚  = XVID codec (MPEG-4)
  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
  â”‚ m â”‚ p â”‚ 4 â”‚ v â”‚  = MP4 Part 2
  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
  â”‚ M â”‚ J â”‚ P â”‚ G â”‚  = Motion JPEG
  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
```

**FourCC Codec Codes**:
| Code | Format | Description |
|------|--------|-------------|
| `XVID` | AVI | MPEG-4 codec |
| `mp4v` | MP4 | MPEG-4 Part 2 |
| `MJPG` | AVI | Motion JPEG |
| `X264` | MP4 | H.264 codec |

**Example**:
```python
fourcc = cv2.VideoWriter_fourcc(*'XVID')
out = cv2.VideoWriter('output.avi', fourcc, 30.0, (640, 480))
out.write(frame)
out.release()
```

**Frame Rate Timing**:
```
30 FPS Video Playback

    Frame 1    Frame 2    Frame 3    Frame 4
       â”‚          â”‚          â”‚          â”‚
       â–¼          â–¼          â–¼          â–¼
    â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â–¶ Time
       â”‚   33ms   â”‚   33ms   â”‚   33ms   â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚

    Wait time = 1000 / FPS = 1000 / 30 â‰ˆ 33 ms
```

---

### 6. GUI Windows

**Window Creation**:
```python
cv2.namedWindow('window', cv2.WINDOW_NORMAL)  # Resizable
cv2.namedWindow('window', cv2.WINDOW_AUTOSIZE)  # Fixed size
```

**Keyboard Input**:
```python
key = cv2.waitKey(delay) & 0xFF
# delay: 0 = wait forever, >0 = wait milliseconds
# & 0xFF: mask for 64-bit systems
```

**Common Key Codes**:
| Key | ASCII | Usage |
|-----|-------|-------|
| ESC | 27 | Exit |
| Space | 32 | Pause |
| Enter | 13 | Confirm |
| 'q' | 113 | Quit |

---

### 7. Trackbars

**What it does**: Creates interactive sliders for parameter adjustment.

**Trackbar Visualization**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Window: "Controls"                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Brightness â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 150 / 255      â”‚
â”‚                              â–²                                      â”‚
â”‚                              â”‚                                      â”‚
â”‚                         Slider position                             â”‚
â”‚                                                                     â”‚
â”‚   Contrast   â”œâ”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  30 / 100      â”‚
â”‚                                                                     â”‚
â”‚   Threshold  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”¤ 200 / 255      â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     [Image Display Area]                            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Callback Pattern**:
```
                    User moves slider
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Callback Function   â”‚
              â”‚   on_change(value)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Update image based   â”‚
              â”‚  on new value         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
def on_change(value):
    # Called when slider moves
    pass

cv2.createTrackbar('name', 'window', initial, max_val, on_change)
current = cv2.getTrackbarPos('name', 'window')
```

---

### 8. Mouse Events

**Mouse Interaction Flow**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Mouse Event Flow                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   User Action                     Event Generated                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                                                     â”‚
â”‚   ğŸ–±ï¸ Move mouse         â”€â”€â”€â”€â”€â”€â”€â–¶  EVENT_MOUSEMOVE                   â”‚
â”‚                                                                     â”‚
â”‚   ğŸ–±ï¸ Left click         â”€â”€â”€â”€â”€â”€â”€â–¶  EVENT_LBUTTONDOWN                 â”‚
â”‚                                   EVENT_LBUTTONUP                   â”‚
â”‚                                                                     â”‚
â”‚   ğŸ–±ï¸ Double-click       â”€â”€â”€â”€â”€â”€â”€â–¶  EVENT_LBUTTONDBLCLK               â”‚
â”‚                                                                     â”‚
â”‚   ğŸ–±ï¸ Right click        â”€â”€â”€â”€â”€â”€â”€â–¶  EVENT_RBUTTONDOWN                 â”‚
â”‚                                                                     â”‚
â”‚   ğŸ–±ï¸ Scroll wheel       â”€â”€â”€â”€â”€â”€â”€â–¶  EVENT_MOUSEWHEEL                  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Event Types**:
| Event | Description |
|-------|-------------|
| `EVENT_MOUSEMOVE` | Mouse moved |
| `EVENT_LBUTTONDOWN` | Left button pressed |
| `EVENT_LBUTTONUP` | Left button released |
| `EVENT_RBUTTONDOWN` | Right button pressed |
| `EVENT_LBUTTONDBLCLK` | Left double-click |
| `EVENT_MOUSEWHEEL` | Scroll wheel |

**Callback Receives Coordinates**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Window                                    â”‚
â”‚  (0,0)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ x  â”‚
â”‚    â”‚                                      â”‚
â”‚    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â”‚         â”‚  Click  â”‚                  â”‚
â”‚    â”‚         â”‚ (125,80)â”‚                  â”‚
â”‚    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚    â”‚                                      â”‚
â”‚    â–¼                                      â”‚
â”‚    y                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

def mouse_callback(event, x, y, flags, param):
                        â”‚  â”‚
                        â”‚  â””â”€â”€ y coordinate
                        â””â”€â”€â”€â”€â”€ x coordinate
```

**Callback Pattern**:
```python
def mouse_callback(event, x, y, flags, param):
    if event == cv2.EVENT_LBUTTONDOWN:
        print(f"Left click at ({x}, {y})")

cv2.setMouseCallback('window', mouse_callback)
```

---

### 9. Drawing Functions

**Coordinate System**:
```
(0,0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ x
  â”‚
  â”‚
  â”‚
  â†“
  y
```

**Drawing Primitives**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Drawing Functions                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   LINE                   RECTANGLE              CIRCLE              â”‚
â”‚                                                                     â”‚
â”‚   pt1 â—                  pt1 â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚        â•²                     â”‚         â”‚       â•±    â—    â•²         â”‚
â”‚         â•²                    â”‚         â”‚      â”‚  center   â”‚         â”‚
â”‚          â•²                   â”‚         â”‚      â”‚  â—â”€â”€â”€â”€â”€â”€â”€â”‚radius    â”‚
â”‚           â— pt2              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â— pt2   â•²         â•±         â”‚
â”‚                                                  â””â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                     â”‚
â”‚   ELLIPSE                POLYLINES              TEXT                â”‚
â”‚                                                                     â”‚
â”‚       â•­â”€â”€â”€â”€â”€â”€â•®           â—â”€â”€â”€â”€â”€â—               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â•±        â•²           â•²   â•±                â”‚ Hello World â”‚     â”‚
â”‚     â”‚   axes   â”‚           â•² â•±                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚      â•²  a Ã— b â•±             â—                    â–²                  â”‚
â”‚       â•°â”€â”€â”€â”€â”€â”€â•¯               â•²                   â”‚ org (x,y)        â”‚
â”‚                               â—                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Line Drawing** (Bresenham's Algorithm):
```
cv2.line(img, pt1, pt2, color, thickness, lineType)
```

**Line Types Comparison**:
```
LINE_4 (4-connected)      LINE_8 (8-connected)      LINE_AA (Anti-aliased)

  â–                          â–                          â–‘â–’
  â–                           â–                         â–‘â–“â–ˆ
  â– â–                           â–                       â–‘â–“â–ˆ
   â–                            â–                     â–‘â–“â–ˆ
   â– â–                            â–                   â–‘â–“â–ˆ
    â–                             â–                 â–’â–“â–ˆ

  Blocky, strict           Diagonal allowed       Smooth edges
  horizontal/vertical      (default)              (slower)
```

| Type | Description |
|------|-------------|
| `LINE_8` | 8-connected (default) |
| `LINE_4` | 4-connected |
| `LINE_AA` | Anti-aliased |

**Circle Drawing** (Midpoint Algorithm):
```
cv2.circle(img, center, radius, color, thickness)
# thickness = -1 for filled
```

**Thickness Parameter**:
```
thickness = 1              thickness = 3              thickness = -1
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â—‹     â”‚                  â”‚ â—‰     â”‚                  â”‚ â—     â”‚
  â”‚       â”‚                  â”‚       â”‚                  â”‚       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”˜
   Outline                   Thick outline              Filled
```

**Rectangle**:
```
cv2.rectangle(img, pt1, pt2, color, thickness)

pt1 (x1, y1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                   â”‚
     â”‚                   â”‚
     â”‚                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â— pt2 (x2, y2)
```

**Ellipse** (parametric form):
```
x = center_x + a Ã— cos(Î¸)
y = center_y + b Ã— sin(Î¸)

        a (semi-major axis)
       â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â–²
     â•±            â•² â”‚ b (semi-minor axis)
    â”‚      â—       â”‚â–¼
     â•²   center   â•±
      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

**Text Rendering**:
```python
cv2.putText(img, text, org, fontFace, fontScale, color, thickness)
```

**Available Fonts**:
- `FONT_HERSHEY_SIMPLEX`
- `FONT_HERSHEY_DUPLEX`
- `FONT_HERSHEY_COMPLEX`
- `FONT_HERSHEY_TRIPLEX`
- `FONT_HERSHEY_SCRIPT_*`

---

## Tutorial Files

| File | Description |
|------|-------------|
| `01_image_io.py` | imread, imwrite, formats, encoding |
| `02_video_io.py` | VideoCapture, VideoWriter, camera input |
| `03_gui_basics.py` | Windows, keyboard, trackbars, mouse events, drawing |

---

## Key Functions Reference

| Function | Description |
|----------|-------------|
| `cv2.imread(path, flags)` | Load image |
| `cv2.imwrite(path, img, params)` | Save image |
| `cv2.imencode(ext, img)` | Encode to buffer |
| `cv2.imdecode(buf, flags)` | Decode from buffer |
| `cv2.VideoCapture(src)` | Open video/camera |
| `cv2.VideoWriter(...)` | Create video writer |
| `cv2.namedWindow(name, flags)` | Create window |
| `cv2.imshow(name, img)` | Display image |
| `cv2.waitKey(delay)` | Wait for key |
| `cv2.destroyAllWindows()` | Close all windows |
| `cv2.createTrackbar(...)` | Create slider |
| `cv2.setMouseCallback(...)` | Set mouse handler |
| `cv2.line(...)` | Draw line |
| `cv2.rectangle(...)` | Draw rectangle |
| `cv2.circle(...)` | Draw circle |
| `cv2.putText(...)` | Draw text |

---

## Further Reading

- [GUI Features](https://docs.opencv.org/4.x/dc/d4d/tutorial_py_table_of_contents_gui.html)
- [Image Codecs](https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html)
- [Video I/O](https://docs.opencv.org/4.x/dd/de7/group__videoio.html)
